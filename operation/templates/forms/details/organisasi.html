{% extends 'base.html' %}
{% load static %}

{% block title %}Organisasi - {{organisasi}}{% endblock title %}

{% block head %}
<style>
  /* .page{
    font-family: 'Courier New', Courier, monospace;
  } */
</style>
{% endblock head %}

{% block body %}
<div class="container page mt-4">
  <h1>{{organisasi}}</h1>
  <h6>Terakhir diupdate pada {{organisasi.updated_at}}</h6>
  <div class="mb-3">
    {% if perms.data.change_kegiatan %}
      <a class="btn btn-outline-info btn-sm" href="">Update Data</a>
    {% endif %}
    {% for user in profil %}
      {% if user.status == 'Observer' %}
        <a class="btn btn-outline-warning btn-sm" href="">Comment Data</a>
      {% endif %}
    {% endfor %}
    {% if perms.data.delete_kegiatan %}
      <a class="btn btn-outline-danger btn-sm" 
        href=""
        onclick="return confirm('Are you sure you want to delete this item?');">
          Delete Data
      </a>
    {% endif %}
  </div>
  <ul>
    <!-- <li><b>Nama Kegiatan:</b> {{kegiatan.nama}}</li>
    <li><b>Tanggal Pelaksanaan:</b> {{kegiatan.tanggal_mulai}} - {{kegiatan.tanggal_selesai}}</li> -->
    <li><b>Nama Organisasi</b> 
      {% if perms.data.add_namaorganisasi %}
      <a href="" target="_blank"><span class="badge bg-success">Add Nama Organisasi</span></a>
      {% endif %} <br>
      <div class="table-responsive table-scrollable">
        <table class="table table-striped">
          <thead>
            <tr>
              <td>No.</td>
              <td>Nama Organisasi</td>
              <td>Status Organisasi</td>
              <td>Nomor Notaris</td>
              <td>Tanggal Notaris</td>
              <th></th>
            </tr>
          </thead>
          <tbody>
            {% for n in nama %}
            <tr>
              <th></th>
              <td>{{n.nama_organisasi}}</td>
              <td>{{n.status_organisasi}}</td>
              <td>{{n.nomor_notaris}}</td>
              <td>{{n.tanggal_notaris}}</td>
              <td class="text-end">
                {% if perms.data.change_pesertakegiatan %}
                <a href="/forms/kegiatan/peserta-update/{{p.id}}" class="text-decoration-none" target="_blank">✏️</a>
                {% endif %}
                {% if perms.data.delete_pesertakegiatan %}
                <a href="/forms/kegiatan/peserta-delete/{{p.id}}" class="text-decoration-none" target="_blank" onclick="return confirm('Are you sure you want to delete this item?');">❌</a>
                {% endif %}
              </td> 
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </li>
    <li>
      <b>Alamat:</b> {{organisasi.alamat}}, {{organisasi.alamat.nama_kec}}, {{organisasi.alamat.nama_kabkot}}, {{organisasi.alamat.nama_prov}}
    </li>
  </ul>
  <p class="mb-4">
    Data ini dikelola oleh <b><i>{{organisasi.user}}</i></b><br>
    <i>Status Data: </i>
    {% if organisasi.status_data == 'Updated' %}
      <span class="badge bg-success">{{organisasi.status_data}}</span><br>
    {% elif organisasi.status_data == 'Need Confirmation' %}
      <span class="badge bg-warning text-dark">{{organisasi.status_data}}</span><br>
    {% else %}
      <span class="badge bg-danger">{{organisasi.status_data}}</span><br>
    {% endif %}
    <i>Keterangan:</i> <br>
    <textarea class="form-control" cols="30" rows="10" disabled>{{organisasi.keterangan}}</textarea>
  </p>
</div>

<script>
  const table = document.getElementsByTagName('tbody')[0],
  rows = table.getElementsByTagName('tr'),
  text = 'textContent' in document ? 'textContent' : 'innerText';

  for (let i = 0, len = rows.length; i < len; i++) {
    rows[i].children[0][text] = 1 + i + rows[i].children[0][text];
  }
</script>
{% endblock body %}